package net.mind_engine.oculus.simpletestframework.report;

import java.io.UnsupportedEncodingException;
import java.net.URLEncoder;

import net.mind_engine.oculus.testrunframework.Config;
import net.mind_engine.oculus.testrunframework.chart.Chart;


public class OculusChartUploader
{
    public static Long uploadChart(Chart chart) throws UnsupportedEncodingException
    {
        Long chartId = null;
        String params = "title="+URLEncoder.encode(chart.getTitle(),"UTF-8")
                        +"&type="+URLEncoder.encode(chart.getType(),"UTF-8")
                        +"&xAxisName="+URLEncoder.encode(chart.getXAxisName(),"UTF-8")
                        +"&xAxisType="+URLEncoder.encode(chart.getXAxisType(),"UTF-8")
                        +"&yAxisName="+URLEncoder.encode(chart.getYAxisName(),"UTF-8")
                        +"&yAxisType="+URLEncoder.encode(chart.getYAxisType(),"UTF-8")
                        +"&data="+URLEncoder.encode(chart.getData(),"UTF-8");
        
        String url = Config.getInstance().get(Config.OCULUS_URL)+"/chart/create";
        String text = HttpPostData.excutePost(url, params);
        chartId = Long.parseLong(text.trim());
        return chartId;
    }
}
